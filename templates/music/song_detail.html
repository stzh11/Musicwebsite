
{% load static %}

{% block title %}{{ song.title }}{% endblock title %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 py-8">
  {# â€”â€”â€”â€”â€”â€”â€”â€” ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ±Ğ»Ğ¾Ğº Ğ¿ĞµÑĞ½Ğ¸ â€”â€”â€”â€”â€”â€”â€”â€” #}
  <div class="flex flex-col md:flex-row items-start md:items-center mb-8">
    {% if song.cover.url %}
      <img src="{{ song.cover.url }}" alt="{{ song.title }}" class="w-full md:w-48 h-48 object-cover rounded-lg shadow mr-6 mb-4 md:mb-0">
    {% endif %}
    <div>
      <h1 class="text-4xl font-bold mb-2">{{ song.title }}</h1>
      {% if song.album %}
        <p class="text-lg text-gray-600 mb-1">ĞĞ»ÑŒĞ±Ğ¾Ğ¼: <a href="{{ song.album.get_absolute_url }}" class="text-blue-500 hover:underline">{{ song.album.title }}</a></p>
      {% endif %}
      {% if song.released_date %}
        <p class="text-sm text-gray-500">Ğ”Ğ°Ñ‚Ğ° Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°: {{ song.released_date|date:"d.m.Y" }}</p>
      {% endif %}
      <form action="{% url 'song-like-toggle' song.slug %}"
        method="post" style="display:inline">
          {% csrf_token %}
          {% if user.is_authenticated %}
            {% if user.id in likes.users %}
              <button type="submit" class="text-red-500 hover:text-red-700">
                â¤ï¸ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ»Ğ°Ğ¹Ğº
              </button>
            {% else %}
              <button type="submit" class="text-gray-500 hover:text-gray-700">
                ğŸ¤ ĞŸĞ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ»Ğ°Ğ¹Ğº
              </button>
            {% endif %}
          {% else %}
            <a href="{% url 'login' %}">Ğ’Ğ¾Ğ¹Ğ´Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ»Ğ°Ğ¹ĞºĞ°Ñ‚ÑŒ</a>
          {% endif %}
      </form>
      <p>Ğ›Ğ°Ğ¹ĞºĞ¾Ğ²: {{ song.likes.count }}</p>
    </div>
  </div>

  {# â€”â€”â€”â€”â€”â€”â€”â€” ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ â€”â€”â€”â€”â€”â€”â€”â€” #}
  {% if song.description %}
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ</h2>
      <p class="text-gray-800">{{ song.description }}</p>
    </section>
  {% endif %}

  {# â€”â€”â€”â€”â€”â€”â€”â€” Ğ¢ĞµĞºÑÑ‚Ñ‹ â€”â€”â€”â€”â€”â€”â€”â€” #}
  {% if song.lyrics %}
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">Ğ¢ĞµĞºÑÑ‚ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ°</h2>
      <pre class="whitespace-pre-wrap bg-gray-50 p-4 rounded">{{ song.lyrics }}</pre>
    </section>
  {% endif %}

  {% if song.translation_lyrics %}
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ‚ĞµĞºÑÑ‚Ğ°</h2>
      <pre class="whitespace-pre-wrap bg-gray-50 p-4 rounded">{{ song.translation_lyrics }}</pre>
    </section>
  {% endif %}

  {# â€”â€”â€”â€”â€”â€”â€”â€” Ğ’Ğ¸Ğ´ĞµĞ¾ â€”â€”â€”â€”â€”â€”â€”â€” #}
  {% if song.clip_url %}
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">Ğ’Ğ¸Ğ´ĞµĞ¾</h2>
      <div class="aspect-w-16 aspect-h-9">
        <iframe src="{{ song.clip_url }}" allowfullscreen class="w-full h-full rounded"></iframe>
      </div>
    </section>
  {% endif %}

  {# â€”â€”â€”â€”â€”â€”â€”â€” Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ÑŒ Ğ½Ğ° Ğ¯Ğ½Ğ´ĞµĞºÑ.ĞœÑƒĞ·Ñ‹ĞºĞµ â€”â€”â€”â€”â€”â€”â€”â€” #}
  {% if song.yandex_music_url %}
    <section class="mb-8">
      <a href="{{ song.yandex_music_url }}" target="_blank" class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded">Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ÑŒ Ğ½Ğ° Ğ¯Ğ½Ğ´ĞµĞºÑ.ĞœÑƒĞ·Ñ‹ĞºĞµ</a>
    </section>
  {% endif %}

  {# â€”â€”â€”â€”â€”â€”â€”â€” Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸ â€”â€”â€”â€”â€”â€”â€”â€” #}
  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-2">Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸</h2>
    <ul class="list-disc list-inside space-y-2">
      {% for conn in conns %}
        <li>
          <a href="{{ conn.artist.get_absolute_url }}" class="font-medium text-blue-500 hover:underline">{{ conn.artist.name }}</a> â€” {{ conn.get_role_display }}
        </li>
      {% empty %}
        <li class="text-gray-500">Ğ£ ÑÑ‚Ğ¾Ğ¹ Ğ¿ĞµÑĞ½Ğ¸ ĞµÑ‰Ñ‘ Ğ½ĞµÑ‚ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ².</li>
      {% endfor %}
    </ul>
  </section>
  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-2">Ğ–Ğ°Ğ½Ñ€Ñ‹</h2>
    <ul class="list-disc list-inside space-y-2">
      {% for genre in genres %}
        <li>
          <a>{{ genre.genre }}</a> 
        </li>
      {% empty %}
        <li class="text-gray-500">Ğ£ ÑÑ‚Ğ¾Ğ¹ Ğ¿ĞµÑĞ½Ğ¸ ĞµÑ‰Ñ‘ Ğ½ĞµÑ‚ Ğ¶Ğ°Ğ½Ñ€Ğ°.</li>
      {% endfor %}
    </ul>
  </section>
  <a href="{% url 'song-create' %}"
   class="inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded">
  Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑĞ½Ñ
  </a>
</div>
{% endblock content %}
